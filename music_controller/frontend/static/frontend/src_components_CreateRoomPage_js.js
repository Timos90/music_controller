/*! For license information please see src_components_CreateRoomPage_js.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["src_components_CreateRoomPage_js"],{"./src/components/CreateRoomPage.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Collapse/Collapse.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Alert/Alert.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControl/FormControl.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormHelperText/FormHelperText.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/RadioGroup/RadioGroup.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/FormControlLabel/FormControlLabel.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Radio/Radio.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router/dist/development/chunk-SYFQ2XB5.mjs");\n\n\n\nconst CreateRoomPage = ({\n  update = false,\n  votesToSkip = 2,\n  guestCanPause = true,\n  roomCode = null,\n  updateCallback = () => {}\n}) => {\n  const navigate = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_1__.useNavigate)();\n  const [guestControl, setGuestControl] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(guestCanPause);\n  const [votes, setVotes] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(votesToSkip);\n  const [errorMsg, setErrorMsg] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [successMsg, setSuccessMsg] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const handleVotesChange = e => setVotes(Number(e.target.value));\n  const handleGuestControlChange = e => setGuestControl(e.target.value === "true");\n  const handleRoomButtonPressed = async () => {\n    const requestOptions = {\n      method: "POST",\n      headers: {\n        "Content-Type": "application/json"\n      },\n      body: JSON.stringify({\n        votes_to_skip: votes,\n        guest_can_pause: guestControl\n      })\n    };\n    try {\n      const response = await fetch("/api/create-room", requestOptions);\n      const data = await response.json();\n      console.log(data);\n\n      // Now, initiate Spotify login before navigating to the room\n      const spotifyResponse = await fetch("/spotify/get-auth-url");\n      const spotifyData = await spotifyResponse.json();\n\n      // Redirect the user to Spotify login\n      window.location.replace(spotifyData.url);\n\n      // **Only after the user logs in, they will be redirected to the room automatically by Spotify**\n      // This navigation won\'t happen until after the login page redirect completes\n      // navigate(`/room/${data.code}`);\n    } catch (error) {\n      console.error("Error creating room:", error);\n      // Handle errors (e.g., show error message to the user)\n    }\n  };\n  const handleUpdateButtonPressed = () => {\n    const requestOptions = {\n      method: "PATCH",\n      headers: {\n        "Content-Type": "application/json"\n      },\n      body: JSON.stringify({\n        votes_to_skip: votes,\n        guest_can_pause: guestControl,\n        code: roomCode\n      })\n    };\n    fetch("/api/update-room", requestOptions).then(response => {\n      if (response.ok) {\n        setSuccessMsg("Room updated successfully!");\n        updateCallback(); // Notify parent that update is done\n      } else {\n        setErrorMsg("Error updating room...");\n      }\n    });\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    display: "flex",\n    flexDirection: "column",\n    justifyContent: "center",\n    alignItems: "center",\n    padding: 3\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    in: errorMsg || successMsg\n  }, successMsg ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    severity: "success",\n    onClose: () => setSuccessMsg(""),\n    sx: {\n      marginBottom: 2\n    }\n  }, successMsg) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    severity: "error",\n    onClose: () => setErrorMsg(""),\n    sx: {\n      marginBottom: 2\n    }\n  }, errorMsg)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    component: "h4",\n    variant: "h4",\n    marginBottom: 2\n  }, update ? "Update Room" : "Create A Room"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    component: "fieldset",\n    margin: "normal"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    align: "center"\n  }, "Guest Control of Playback State")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n    row: true,\n    value: guestControl.toString(),\n    onChange: handleGuestControlChange\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: "true",\n    control: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n      color: "primary"\n    }),\n    label: "Play/Pause",\n    labelPlacement: "bottom"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], {\n    value: "false",\n    control: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n      color: "secondary"\n    }),\n    label: "No Control",\n    labelPlacement: "bottom"\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    margin: "normal"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    required: true,\n    type: "number",\n    onChange: handleVotesChange,\n    value: votes,\n    inputProps: {\n      min: 1,\n      style: {\n        textAlign: "center"\n      }\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {\n    align: "center"\n  }, "Votes Required To Skip Song"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    marginTop: 3\n  }, update ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    color: "primary",\n    variant: "contained",\n    onClick: handleUpdateButtonPressed,\n    sx: {\n      marginRight: 2\n    }\n  }, "Update Room")) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    color: "primary",\n    variant: "contained",\n    onClick: handleRoomButtonPressed,\n    sx: {\n      marginRight: 2\n    }\n  }, "Create A Room"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    color: "secondary",\n    variant: "contained",\n    component: react_router_dom__WEBPACK_IMPORTED_MODULE_1__.Link,\n    to: "/"\n  }, "Back"))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CreateRoomPage);\n\n//# sourceURL=webpack://frontend/./src/components/CreateRoomPage.js?')}}]);