/*! For license information please see src_components_MusicPlayer_js.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["src_components_MusicPlayer_js"],{"./src/components/MusicPlayer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! prop-types */ "./node_modules/prop-types/index.js");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Card/Card.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/CardMedia/CardMedia.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Box/Box.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/CardContent/CardContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/IconButton/IconButton.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/LinearProgress/LinearProgress.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Snackbar/Snackbar.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Alert/Alert.js");\n/* harmony import */ var _mui_icons_material_PlayArrow__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/icons-material/PlayArrow */ "./node_modules/@mui/icons-material/esm/PlayArrow.js");\n/* harmony import */ var _mui_icons_material_Pause__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/icons-material/Pause */ "./node_modules/@mui/icons-material/esm/Pause.js");\n/* harmony import */ var _mui_icons_material_SkipNext__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/icons-material/SkipNext */ "./node_modules/@mui/icons-material/esm/SkipNext.js");\n\n\n\n\n\n\nconst MusicPlayer = ({\n  title,\n  artist,\n  image_url,\n  is_playing,\n  time,\n  duration,\n  votes,\n  votes_required,\n  onPlayPause,\n  onSkip\n}) => {\n  const songProgress = time / duration * 100;\n  const [message, setMessage] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [messageType, setMessageType] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("info");\n  const [open, setOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const showMessage = (msg, type) => {\n    setMessage(msg);\n    setMessageType(type);\n    setOpen(true);\n  };\n  const skipSong = async () => {\n    try {\n      const response = await fetch("/spotify/skip", {\n        method: "POST",\n        headers: {\n          "Content-Type": "application/json"\n        }\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        showMessage(data.error || "Failed to skip song.", "error");\n      } else {\n        showMessage(data.message || "Song skipped successfully!", "success");\n        if (onSkip) onSkip();\n      }\n    } catch (error) {\n      console.error("Error skipping song:", error);\n      showMessage("An error occurred.", "error");\n    }\n  };\n  const pauseSong = async () => {\n    // Optimistically update the pause state before making the API call\n    if (onPlayPause) onPlayPause(false);\n    try {\n      const response = await fetch("/spotify/pause", {\n        method: "PUT",\n        headers: {\n          "Content-Type": "application/json"\n        }\n      });\n\n      // Check if the response was successful\n      if (!response.ok) {\n        throw new Error("Failed to pause song.");\n      }\n      showMessage("Song paused!", "info");\n    } catch (error) {\n      console.error("Error pausing song:", error);\n      showMessage("Failed to pause song.", "error");\n\n      // Revert the state if the fetch fails\n      if (onPlayPause) onPlayPause(true);\n    }\n  };\n  const playSong = async () => {\n    // Optimistically update the play state before making the API call\n    if (onPlayPause) onPlayPause(true);\n    try {\n      const response = await fetch("/spotify/play", {\n        method: "PUT",\n        headers: {\n          "Content-Type": "application/json"\n        }\n      });\n\n      // Check if the response was successful\n      if (!response.ok) {\n        throw new Error("Failed to play song.");\n      }\n      showMessage("Song playing!", "info");\n    } catch (error) {\n      console.error("Error playing song:", error);\n      showMessage("Failed to play song.", "error");\n\n      // Revert the state if the fetch fails\n      if (onPlayPause) onPlayPause(false);\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    sx: {\n      display: "flex",\n      alignItems: "center",\n      padding: 2,\n      gap: 2,\n      maxWidth: 600,\n      margin: "auto"\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    component: "img",\n    sx: {\n      width: 100,\n      height: 100,\n      objectFit: "cover",\n      borderRadius: 1\n    },\n    image: image_url,\n    alt: `${title} album cover`\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      flex: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    sx: {\n      padding: 0\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    component: "h5",\n    variant: "h5"\n  }, title), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    color: "text.secondary",\n    variant: "subtitle1"\n  }, artist)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    sx: {\n      display: "flex",\n      alignItems: "center",\n      gap: 1,\n      marginTop: 1\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    onClick: () => {\n      is_playing ? pauseSong() : playSong();\n    }\n  }, is_playing ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_icons_material_Pause__WEBPACK_IMPORTED_MODULE_7__["default"], null) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_icons_material_PlayArrow__WEBPACK_IMPORTED_MODULE_8__["default"], null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], {\n    onClick: skipSong\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "subtitle2",\n    color: "text.secondary"\n  }, votes, " / ", votes_required), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_icons_material_SkipNext__WEBPACK_IMPORTED_MODULE_9__["default"], null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n    variant: "determinate",\n    value: songProgress,\n    sx: {\n      marginTop: 1\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n    open: open,\n    autoHideDuration: 3000,\n    onClose: () => setOpen(false)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], {\n    severity: messageType,\n    onClose: () => setOpen(false)\n  }, message)));\n};\nMusicPlayer.propTypes = {\n  title: (prop_types__WEBPACK_IMPORTED_MODULE_13___default().string).isRequired,\n  artist: (prop_types__WEBPACK_IMPORTED_MODULE_13___default().string).isRequired,\n  image_url: (prop_types__WEBPACK_IMPORTED_MODULE_13___default().string).isRequired,\n  is_playing: (prop_types__WEBPACK_IMPORTED_MODULE_13___default().bool).isRequired,\n  time: (prop_types__WEBPACK_IMPORTED_MODULE_13___default().number).isRequired,\n  duration: (prop_types__WEBPACK_IMPORTED_MODULE_13___default().number).isRequired,\n  votes: (prop_types__WEBPACK_IMPORTED_MODULE_13___default().number).isRequired,\n  votes_required: (prop_types__WEBPACK_IMPORTED_MODULE_13___default().number).isRequired,\n  onPlayPause: (prop_types__WEBPACK_IMPORTED_MODULE_13___default().func),\n  onSkip: (prop_types__WEBPACK_IMPORTED_MODULE_13___default().func)\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MusicPlayer);\n\n//# sourceURL=webpack://frontend/./src/components/MusicPlayer.js?')}}]);